{"version":3,"sources":["../../src/pages/my-balance/renew-membership/renew-membership.module.ts","../../src/pages/my-balance/renew-membership/renew-membership.ts"],"names":[],"mappings":"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","file":"29.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {RenewMembership} from './renew-membership';\nimport {TranslateModule} from \"ng2-translate\";\n//import { MomentModule } from 'angular2-moment';\n@NgModule({\n  declarations: [\n    RenewMembership,\n  ],\n  imports: [\n    IonicPageModule.forChild(RenewMembership),\n    TranslateModule,\n    //MomentModule\n  ],\n  exports: [\n    RenewMembership\n  ]\n})\nexport class SettingsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-balance/renew-membership/renew-membership.module.ts","import { AppUtilFunctions } from './../../../app/appglobal/app.utilfuns';\n// Main Components\nimport {Component} from '@angular/core';\nimport {Events, IonicPage, ModalController, NavController, NavParams, ViewController, AlertController} from 'ionic-angular';\n//import { DateFormatPipe } from 'angular2-moment';\n// Providers\nimport {TranslateService} from 'ng2-translate';\nimport { UserProvider } from './../../../providers/user/user';\n\n@IonicPage()\n@Component({\n    selector: 'page-renew-membership',\n    templateUrl: 'renew-membership.html',\n})\nexport class RenewMembership {\n    showLoader: boolean = true;\n    pageParams: any;\n    userServices: any;\n    totalSelectCost:any;\n    totalCostAfdisc:any;\n    subscriptionPeriod:number = 1;\n    cost:any;\n    alertTitle:string;\n    alertSubTitle:string;\n    alertAccept:string;\n    actionLoader: boolean = false;\n    constructor(\n        public navCtrl: NavController,\n        public navParams: NavParams,\n        public modalctrl: ModalController,\n        public events: Events,\n        public viewCtrl: ViewController,\n        public userProvider: UserProvider,\n        public translateService: TranslateService,\n        public appUtils: AppUtilFunctions,\n        public alertCtrl: AlertController\n    ) {\n         console.log('*************** RenewMembership ******************');\n        this.pageParams = this.navParams.get('pageData');\n        console.log('pageParams >>> ', this.pageParams);\n        \n    }\n\n    ionViewDidEnter() {\n        // Run After Page Already Entered\n\n    }\n\n    ionViewDidLoad() {\n        this.getUserServices(this.pageParams.id);\n    }\n        \n\n    getUserServices(id){\n     this.userProvider.getUserServices({\"user_id\": id,\"lang_code\":this.appUtils.CurrentLang}).subscribe((data) => {\n        if (data) {\n            console.log('service to renew From server', data);\n            this.userServices = data;\n            if (data.services.length > 1) {\n                this.userServices['servicesCount'] = data.services.length;\n            }\n            this.calculatSubscription();\n            \n            \n        }\n        \n     }, err => {\n        if (err.error instanceof Error) {\n            console.warn('client side errror', err)\n        } else {\n            console.warn('server side error', err)\n        }\n     }, () => {\n        this.showLoader = false;\n     })\n    }\n\n    calculatSubscription(){\n        this.totalSelectCost = (this.subscriptionPeriod * this.userServices.total_cost);\n        if (this.userServices.services.length > 1) {\n            this.totalCostAfdisc = ((this.subscriptionPeriod * this.userServices.total_cost) - ((this.subscriptionPeriod * this.userServices.total_cost * 30 ) / 100 ));\n        }\n        \n        console.log(this.subscriptionPeriod , this.totalSelectCost, this.totalCostAfdisc);\n        \n    }\n\n    addSubscription(){\n        \n        if(!this.subscriptionPeriod){\n            this.translateService.get('plz_select_period')\n            .subscribe( value => {this.appUtils.AppToast(value)})\n        }else{\n            console.log('this totalSelectCost', this.totalSelectCost);\n            console.log('this totalCostAfdisc', this.totalCostAfdisc);\n            \n            this.totalCostAfdisc ? this.cost = this.totalCostAfdisc :  this.cost = this.totalSelectCost;\n            console.log('this cost', this.cost);\n            if (this.cost <= this.pageParams.balanceSum) {\n                this.actionLoader = true;\n                if (this.pageParams.lastEndDate) {\n                    console.log('pageParams >>> ', this.pageParams);\n                }\n                let start_date ;\n                this.pageParams.lastEndDate ? start_date  = this.pageParams.lastEndDate : start_date = \"no_start_date\";\n                let subscrData = {\n                    \"user_id\": this.pageParams.id,\n                    \"balance\": -this.cost,\n                    \"type\": '4',\n                    \"start_date\":start_date,\n                    \"period\":this.subscriptionPeriod\n                }\n                this.userProvider.addSubscription(subscrData).subscribe((data) => {\n                    if (data) {\n                        console.log('addSubscription From server', data);\n                        this.dismiss(data);\n                    }\n\n                    \n                }, err => {\n                    if (err.error instanceof Error) {\n                        console.warn('client side errror', err)\n                    } else {\n                        console.warn('server side error', err)\n                    }\n                }, () => {\n                    this.actionLoader = false;\n                })\n\n            }else{\n                this.notEnoughtAlert();\n            }\n        }\n    }\n\n    notEnoughtAlert(){\n        \n        this.translateService.get('warning')\n        .subscribe(value => {this.alertTitle = value});\n\n        this.translateService.get('not_enough_balance')\n        .subscribe(value => {this.alertSubTitle = value});\n\n        this.translateService.get('Close')\n        .subscribe(value => {this.alertAccept = value});\n\n        let alert = this.alertCtrl.create({\n            title: this.alertTitle,\n            subTitle: this.alertSubTitle,\n            buttons:[\n                {\n                    text: this.alertAccept,\n                    handler: () => {\n                        console.log(\"accepted Clicked\");\n                    }\n                }\n            ]\n        });\n        alert.present();\n    }\n\n\n    dismiss(data) {\n        this.viewCtrl.dismiss(data);\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-balance/renew-membership/renew-membership.ts"],"sourceRoot":""}