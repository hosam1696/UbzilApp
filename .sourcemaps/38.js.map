{"version":3,"sources":["../../src/pages/applyjop/applyjop.module.ts","../../src/pages/applyjop/applyjop.ts"],"names":[],"mappings":"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","file":"38.js","sourcesContent":["import { TranslateModule } from 'ng2-translate';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ApplyJop } from './applyjop';\n\n@NgModule({\n  declarations: [\n    ApplyJop,\n  ],\n  imports: [\n    IonicPageModule.forChild(ApplyJop),\n    TranslateModule\n  ],\n  exports: [\n    ApplyJop\n  ]\n})\nexport class ContactusModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/applyjop/applyjop.module.ts","import { AppUtilFunctions } from './../../app/appglobal/app.utilfuns';\n// Main Components\nimport {Component} from '@angular/core';\nimport {IonicPage, NavController, ViewController, NavParams, ToastController, Events, AlertController} from 'ionic-angular';\nimport {TranslateService} from 'ng2-translate';\n\n// Providers\nimport { ProjectsProvider} from './../../providers/projects/project';\nimport { UserProvider } from './../../providers/user/user';\n// Req Pages\n\n@IonicPage()\n@Component({\n    selector: 'page-applyjop',\n    templateUrl: 'applyjop.html',\n})\nexport class ApplyJop {\n\n    pageParams: any;\n    mestitle: any;\n    mesbody: any;\n    toasttext: any;\n    closetext: any;\n    typeOfferDuration: any = 'constant';\n    offerPrice: any;\n    offerDuration: any;\n    offerDetails: any;\n    userLocal:any;\n    userBalances:any\n    alertTitle:string;\n    alertSubTitle:string;\n    alertAccept:string;\n    //showLoader: boolean = true;\n\n    constructor(\n        public navCtrl: NavController,\n        public navParams: NavParams,\n        public viewCtrl: ViewController,\n        public events: Events,\n        public translateService: TranslateService,\n        private toastCtrl: ToastController,\n        public appUtils: AppUtilFunctions,\n        public projectsProvider: ProjectsProvider,\n        public userProvider: UserProvider,\n        public alertCtrl: AlertController\n    ) {\n        console.log('*************** ApplyJop ******************');\n        this.pageParams = this.navParams.get('pageData');\n        console.log('pageParams >>> ', this.pageParams);\n\n    }\n\n    ionViewDidEnter() {\n    }\n\n    ionViewDidLoad() {\n        this.translateService.get('Request-successfully')\n            .subscribe(lang => {\n                this.toasttext = lang;\n            })\n        this.translateService.get('Close')\n            .subscribe(lang => {\n                this.closetext = lang;\n            })\n\n        this.appUtils.storage.get('localUserInfo')\n        .then((data)=>{\n            this.userLocal = data;\n            console.log('localUserInfo in ApplyJop', this.userLocal);\n            this.getUserBalances(this.userLocal.id,this.userLocal.service_type);\n        })\n    }\n\n    // TODO: Get User Balances\n    getUserBalances(id,service_type){\n        this.userProvider.getUserBalances({\"user_id\": id,\"service_type\":service_type}).subscribe((data) => {\n            if (data) {\n                // todo: i use the unary + operator to convert string to intger\n                this.userBalances = +data.balanceSum;\n                console.log('user ddddd', this.userBalances);\n            }\n            \n        }, err => {\n            if (err.error instanceof Error) {\n                console.warn('client side errror', err)\n            } else {\n                console.warn('server side error', err)\n            }\n        }, () => {\n        })\n    }\n\n    dismiss() {\n        this.viewCtrl.dismiss();\n    }\n\n    Send() {\n        console.log('userBalance', this.userBalances);\n        console.log('serviceCost', +this.pageParams.serviceCost);\n        if(!this.offerPrice){\n            this.translateService.get('plz_insert_offer_price')\n            .subscribe( value => {this.appUtils.AppToast(value)})\n        }else if(!this.offerDuration){\n            this.translateService.get('plz_insert_offer_duration')\n            .subscribe( value => {this.appUtils.AppToast(value)})\n        }else if(this.userBalances < +this.pageParams.serviceCost){\n            this.notEnoughtAlert();\n        }else{\n\n            let sentData ={\n                \"provider_id\": this.userLocal.id,\n                \"order_id\":this.pageParams.orderId,\n                \"offer_price\": this.offerPrice,\n                \"type_offer_duration\":this.typeOfferDuration,\n                \"offer_duration\":this.offerDuration,\n                \"offer_details\":this.offerDetails,\n                \"user_id\": this.userLocal.id,\n                \"verifycode\": this.userLocal.verifycode,\n                //\"lang_code\": this.appUtils.CurrentLang,\n                \"service_cost\":this.pageParams.serviceCost,\n            };\n            this.projectsProvider.addOffer(sentData).subscribe((data) => {\n                console.log('applicants from server in ApplyJop', data);\n                if (data) {\n                    //this.dismiss(this.pageParams.orderId);\n                    delete sentData.user_id;\n                    delete sentData.verifycode;\n                    delete sentData.service_cost;\n                    let applicantData = {\n                        ... sentData,\n                        \"date_added\":Date.now(),\n                        \"fullname\":this.userLocal.fullname,\n                        \"avatar\":this.userLocal.avatar,\n                        \"gender\":this.userLocal.gender,\n                        \"rater_count\":this.userLocal.rater_count,\n                        \"rating_value\":this.userLocal.rating_value,\n                    }\n                    this.viewCtrl.dismiss(applicantData);\n                    let toast = this.toastCtrl.create({\n                        message: this.toasttext,\n                        position: \"middle\",\n                        showCloseButton: true,\n                        closeButtonText: this.closetext,\n                        duration: 3000\n            \n                    });\n                    toast.present();\n                } else {\n                    console.warn('somthing went wrong when getting Project Details')\n                }\n            }, err => {\n                //this.showLoader = false;\n                if (err.error instanceof Error) {\n                    console.warn('client side error', err);\n                } else {\n                    console.warn('server side error', err);\n                }\n            }, () => {\n                //this.showLoader = false;\n            })\n        }\n    }\n    \n    notEnoughtAlert(){\n        \n        this.translateService.get('warning')\n        .subscribe(value => {this.alertTitle = value});\n\n        this.translateService.get('not_enough_balance')\n        .subscribe(value => {this.alertSubTitle = value});\n\n        this.translateService.get('Close')\n        .subscribe(value => {this.alertAccept = value});\n\n        let alert = this.alertCtrl.create({\n            title: this.alertTitle,\n            subTitle: this.alertSubTitle,\n            buttons:[\n                {\n                    text: this.alertAccept,\n                    handler: () => {\n                        console.log(\"accepted Clicked\");\n                    }\n                }\n            ]\n        });\n        alert.present();\n    }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/applyjop/applyjop.ts"],"sourceRoot":""}