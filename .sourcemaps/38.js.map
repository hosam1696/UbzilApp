{"version":3,"sources":["../../src/pages/add-request/add-request.module.ts","../../src/pages/add-request/add-request.ts"],"names":[],"mappings":"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","file":"38.js","sourcesContent":["import { TranslateModule } from 'ng2-translate';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddRequest } from './add-request';\n\n@NgModule({\n  declarations: [\n    AddRequest,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddRequest),\n    TranslateModule\n  ],\n  exports: [\n    AddRequest\n  ]\n})\nexport class IntroModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-request/add-request.module.ts","import { Push } from '@ionic-native/push';\nimport { AppUtilFunctions } from './../../app/appglobal/app.utilfuns';\nimport { ServicesProvider } from './../../providers/services/services';\nimport { Component, Input } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events, ModalController } from 'ionic-angular';\nimport {TranslateService} from 'ng2-translate';\n//import { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\nimport {GetLocation} from \"../get-location/get-location\";\n\n@IonicPage()\n@Component({\n  selector: 'page-add-request',\n  templateUrl: 'add-request.html',\n})\nexport class AddRequest {\n  order:any; \n  pageParams: any;\n  forms: any ;\n  MreqAddress: string = 'يرجي اختيار العنوان';\n  localUser: any;\n  DataFromModal: any;\n  loader: boolean = false;\n  appError : boolean = false;\n  locationOnMap: string = '';\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public modalCtrl: ModalController,\n    public appUtils:AppUtilFunctions,\n    public events: Events,\n    public services: ServicesProvider,\n    public translateService: TranslateService,\n  ) {    \n\n    this.pageParams = this.navParams.get('pageData');\n\n    console.log('params data from sub category page', this.pageParams)\n    this.order = {\n      service_id:'',\n      order_title: '',\n      longitude: '', //longitude: this.localUser.longitude,\n      latitude: '',  //latitude: this.localUser.latitude,\n      sector_id: '',\n      user_id: '',//this.localUser.id,\n      verifycode: '$2y$12$FCtEqMB9xLO4FZxj0KUeyuzOwMB/ojRxD9olFk2ReBq5oBtpGO70K',\n      form:[]\n    }\n  }\n\n  async ionViewWillEnter(){\n    \n    // TODO: set title for add map translated any lang\n    this.translateService.get('Click to add location')\n    .subscribe(value => {this.locationOnMap = value});\n    \n    // TODO: store data of user when login in \n    this.localUser = await this.appUtils.storage.get('localUserInfo');\n\n    console.log('awaited user Info', this.localUser)\n    \n  }\n\n  ionViewDidLoad() {\n    // Run After Page Already Loaded\n\n    this.services.getServiceFormShape(\n      {\n        \"user_id\": \"3\",\n        \"verifycode\": \"$2y$12$XQBdOjshGvoSRcT6uTlJaOkOiV.htMTyyT09IXxdjHrSQeoc/vgkO\",\n        \"lang_code\": this.pageParams.lang_code,\n        \"service_id\": this.pageParams.id,\n      }\n    ).subscribe(({status, data, error}) => {\n      if (status === 'success') {\n        console.log('returned Data forms', data);\n        this.forms = data.forms;\n        //console.log('new Form Data structure', this.order);\n        \n      } else {\n        console.warn(error)\n        }\n    })\n  }\n\n  locationmodal() {\n    let pageData:any = null;\n    if (this.order.latitude  && this.order.longitude ) {\n        pageData = { latitude: this.order.latitude, longitude: this.order.longitude };\n    }\n    let modal = this.modalCtrl.create(GetLocation, {pageData});\n    modal.onDidDismiss((data) => {\n      console.log('map data from modal', data);\n      if (data && data.latitude && data.longitude) {\n        //console.log(data);\n        this.order.latitude = data.latitude;\n        this.order.longitude = data.longitude;\n        if (data.address)\n          this.locationOnMap = data.address;\n      }\n\n    });\n    modal.present();\n\n    /* let getlocationModal = this.modalCtrl.create('GetLocation', { pageData: { lat: '30.4446546', lng: '20.484897', service_id: this.pageParams.id, skipSearch: true  }});\n      getlocationModal.present();\n      getlocationModal.onDidDismiss(data => {\n          // Saving this info to local storage after updating user profile info\n      }) */\n  }\n\n  openModal() {\n    let modal = this.modalCtrl.create('PlacesModalPage');\n\n    modal.onDidDismiss(data => {\n      console.log('data from modal', data);\n      this.DataFromModal = data;\n      // to set sector_id in order object with value \n      this.order.sector_id = data.sector_id;\n      // text appear in title address\n      (data.sector_id) ? this.MreqAddress = data.governorate + (data.sector ? ' - ' + data.sector : '') : this.MreqAddress = 'يرجي اختيار العنوان';\n    });\n\n    modal.present()\n  }\n\n  changCheckBox(value, inputId, isChecked :boolean) {\n    //isChecked = 'true'\n    console.log(value , inputId, isChecked);\n    this.order.form[value] = (this.order.form[value] instanceof Array) ? this.order.form[value] : [];\n    if(isChecked) {\n      this.order.form[value].push(inputId);\n    } else {\n      var _index = this.order.form[value].indexOf(inputId);\n      this.order.form[value].splice(_index, 1);\n    }\n    console.log(this.order.form);\n\n  }\n\n  sendRequest() {\n    // set values of user_id and service_id\n    this.order.user_id = this.localUser.id;\n    this.order.verifycode = this.localUser.verifycode;\n    this.order.service_id = this.pageParams.id;\n\n    //validation\n\n    // order_title validation\n    if (!this.order.order_title) {\n      this.translateService.get('plz-enter-request-name')\n      .subscribe( value => {this.appUtils.AppToast(value)})\n      this.appError = true;\n    }\n    // sector_id validation\n    else if (!this.order.sector_id) {\n      this.translateService.get('Request-successfully')\n      .subscribe( value => {this.appUtils.AppToast(value)})\n      this.appError = true;\n    }\n    // form data validation\n    else{\n      for(let i of this.forms){\n        //console.log('checkAcc value',i['accurate_message']);\n        if (i['checkAcc'] == 1) {\n          if (!this.order.form[i['id']]) {\n            this.appUtils.AppToast(i['accurate_message']);\n            this.appError = true;\n            return false;            \n            //console.log(i['id'], i['accurate_message']);\n          }\n        }\n      }\n    }\n\n    if(!this.appError){\n      // send add request here\n      this.loader = true;\n      console.log('you have entered ', this.order);\n      this.services\n        .addServiceOrders(this.order)\n        .subscribe(\n          orderData => {\n            console.log(orderData);\n            if (orderData.status === 'success') {\n              this.translateService.get('Request-successfully')\n              .subscribe( value => {this.appUtils.AppToast(value)});\n              // this.appUtils.storage.set('localUserInfo', userData.data)\n              //   .then(() => {\n              //     this.navCtrl.setRoot('Tabs');\n              //   })\n            }\n          },\n          err => {\n            this.loader = false;\n            if (err.error instanceof Error) {\n                console.warn('client side error', err)\n            } else {\n              console.warn('server side error', err);\n              }\n          },\n          () => {\n            this.loader = false;\n          }\n        \n        );\n    }\n  }\n\n    \n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-request/add-request.ts"],"sourceRoot":""}