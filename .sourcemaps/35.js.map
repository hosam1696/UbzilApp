{"version":3,"sources":["../../src/pages/balance-history/balance-history.module.ts","../../src/pages/balance-history/balance-history.ts"],"names":[],"mappings":"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","file":"35.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {BalanceHistory} from './balance-history';\nimport {TranslateModule} from \"ng2-translate\";\nimport { MomentModule } from 'angular2-moment';\n@NgModule({\n  declarations: [\n    BalanceHistory,\n  ],\n  imports: [\n    IonicPageModule.forChild(BalanceHistory),\n    TranslateModule,\n    MomentModule\n  ],\n  exports: [\n    BalanceHistory\n  ]\n})\nexport class SettingsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/balance-history/balance-history.module.ts","// Main Components\nimport {Component} from '@angular/core';\nimport {Events, IonicPage, ModalController, NavController, NavParams, ViewController} from 'ionic-angular';\n//import { DateFormatPipe } from 'angular2-moment';\n// Providers\nimport {TranslateService} from 'ng2-translate';\nimport { UserProvider } from './../../providers/user/user';\n\n@IonicPage()\n@Component({\n    selector: 'page-balance-history',\n    templateUrl: 'balance-history.html',\n})\nexport class BalanceHistory {\n    showLoader: boolean = true;\n    pageParams: any;\n    userBalances: any;\n    initLimit: number = 15;\n    initStart: number = 0;\n    moreData: boolean = true;\n    pullingText:string;\n    refreshingText:string;\n    loadingText:string;\n    constructor(\n        public navCtrl: NavController,\n        public navParams: NavParams,\n        public modalctrl: ModalController,\n        public events: Events,\n        public viewCtrl: ViewController,\n        public userProvider: UserProvider,\n        public translateService: TranslateService,\n    ) {\n         console.log('*************** BalanceHistory ******************');\n        this.pageParams = this.navParams.get('pageData');\n        console.log('pageParams >>> ', this.pageParams);\n    }\n\n    ionViewDidEnter() {\n        // Run After Page Already Entered\n\n    }\n\n    ionViewDidLoad() {\n        // Run After Page Already Loaded\n        this.translateService.get('pullingText')\n        .subscribe(value => {this.pullingText = value})\n\n        this.translateService.get('refreshingText')\n        .subscribe(value => {this.refreshingText = value})\n\n        this.translateService.get('loadingText')\n        .subscribe(value => {this.loadingText = value})\n\n        this.fetchBalanceOperations(this.pageParams.id, this.initLimit, this.initStart);\n\n\n    }\n    \nfroLoop(){\n    for (let index = 0; index < this.userBalances.length; index++) {\n                if (this.userBalances[index]['type'] == '1') {\n\n                    this.translateService.get('add_balance_msg_1')\n                    .subscribe(value => {this.userBalances[index]['balanceMsg'] = value});\n\n                    this.translateService.get('add_balance_msg_1_complete')\n                    .subscribe(value => {this.userBalances[index]['balanceMsgComplete'] = value});\n\n\n                }else if (this.userBalances[index]['type'] == '2') {\n\n                    this.translateService.get('minus_balance_msg_2')\n                    .subscribe(value => {this.userBalances[index]['balanceMsg'] = value});\n\n                    this.translateService.get('minus_balance_msg_2_complete')\n                    .subscribe(value => {this.userBalances[index]['balanceMsgComplete'] = value});\n\n                    this.userBalances[index]['balance'] = -this.userBalances[index]['balance'];\n\n                }else if(this.userBalances[index]['type'] == '3'){\n\n                    this.translateService.get('add_balance_msg_3')\n                    .subscribe(value => {this.userBalances[index]['balanceMsg'] = value});\n\n                    this.translateService.get('add_balance_msg_3_complete')\n                    .subscribe(value => {this.userBalances[index]['balanceMsgComplete'] = value});\n\n                }else{\n\n                    this.translateService.get('add_memberShip_balance_msg_4')\n                    .subscribe(value => {this.userBalances[index]['balanceMsg'] = value});\n                }\n            }\n}\n\n    fetchBalanceOperations(id, limit?: number, start?: number){\n     this.userProvider.getBalanceOperations({\"user_id\": id, \"limit\" : limit, \"start\" :start}).subscribe((data) => {\n        if (data) {\n            console.log('balances history From server', data);\n            this.userBalances = data;\n            this.froLoop();\n        }\n        \n     }, err => {\n        //this.loader = false;\n        if (err.error instanceof Error) {\n            console.warn('client side errror', err)\n        } else {\n            console.warn('server side error', err)\n        }\n     }, () => {\n        this.showLoader = false;\n     })\n    }\n\n    // TODO: get more balance history list when go to bottom\n    fetchMoreData(event) {\n        console.log(' there are more data ? ',this.moreData)\n        if (this.moreData) {\n          this.userProvider.getBalanceOperations({\"user_id\": this.pageParams.id, \"limit\" : this.initLimit, \"start\" :this.initStart += this.initLimit})\n            .subscribe((data) => {\n              if (data) {\n                console.log(data.length,'this.initStart' , this.initStart);\n                console.log('data.length' , data.length);\n                this.userBalances = [...this.userBalances, ...data]; //es6 destruction : concat data to the providers array \n                 this.froLoop(); \n                if (data.length >= this.initLimit){\n                  this.moreData = true;\n                }else{\n                  this.moreData = false;\n                }\n                \n              }\n            },\n            (err) => {\n              event.complete();\n              console.warn('error', err) // catch net error acceccsing database\n            },\n            () => {\n              \n              event.complete();\n            }\n    \n            );\n    \n        } else {\n          event.complete();\n          console.log('there is no data');\n          return false;\n        }\n    }\n    \n    // TODO: refresh balance history list when go to top\n    refreshBalanceHistory(event) {\n        this.initStart = 0;\n        this.fetchBalanceOperations(this.pageParams.ids,this.initLimit, this.initStart);\n        event.complete();\n    }\n\n    \n    MessagesDetail() {\n    let MessagesDetailModal = this.modalctrl.create('MessagesDetail');\n    MessagesDetailModal.present();\n    MessagesDetailModal.onDidDismiss(data => {\n        // Saving this info to local storage after updating user profile info\n    })\n\n    }\n\n   dismiss(data) {\n    this.viewCtrl.dismiss(data);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/balance-history/balance-history.ts"],"sourceRoot":""}